{"ast":null,"code":"var _regeneratorRuntime = require(\"/Users/mikebannoura/Dropbox/My Mac (MacBook-Pro-Mike.local)/Desktop/mmbball-app/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\");\n\nvar _objectWithoutProperties = require(\"/Users/mikebannoura/Dropbox/My Mac (MacBook-Pro-Mike.local)/Desktop/mmbball-app/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/objectWithoutProperties\");\n\nvar _asyncToGenerator = require(\"/Users/mikebannoura/Dropbox/My Mac (MacBook-Pro-Mike.local)/Desktop/mmbball-app/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/asyncToGenerator\");\n\nvar express = require(\"express\");\n\nvar _require = require(\"../models\"),\n    User = _require.User;\n\nvar router = express.Router();\nrouter.post(\"/\", /*#__PURE__*/function () {\n  var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(req, res) {\n    var _req$body, email, rest, user;\n\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.prev = 0;\n            _req$body = req.body, email = _req$body.email, rest = _objectWithoutProperties(_req$body, [\"email\"]);\n            _context.next = 4;\n            return User.findOneAndUpdate({\n              email: email\n            }, rest, {\n              upsert: true\n            });\n\n          case 4:\n            user = _context.sent;\n            res.status(201).send(user);\n            _context.next = 11;\n            break;\n\n          case 8:\n            _context.prev = 8;\n            _context.t0 = _context[\"catch\"](0);\n            res.status(400).send(_context.t0);\n\n          case 11:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee, null, [[0, 8]]);\n  }));\n\n  return function (_x, _x2) {\n    return _ref.apply(this, arguments);\n  };\n}());\nmodule.exports = router;","map":{"version":3,"sources":["/Users/mikebannoura/Dropbox/My Mac (MacBook-Pro-Mike.local)/Desktop/mmbball-app/routes/user.js"],"names":["express","require","User","router","Router","post","req","res","body","email","rest","findOneAndUpdate","upsert","user","status","send","module","exports"],"mappings":";;;;;;AAAA,IAAMA,OAAO,GAAGC,OAAO,CAAC,SAAD,CAAvB;;eACiBA,OAAO,CAAC,WAAD,C;IAAhBC,I,YAAAA,I;;AAER,IAAMC,MAAM,GAAGH,OAAO,CAACI,MAAR,EAAf;AAEAD,MAAM,CAACE,IAAP,CAAY,GAAZ;AAAA,sEAAiB,iBAAOC,GAAP,EAAYC,GAAZ;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBAEcD,GAAG,CAACE,IAFlB,EAELC,KAFK,aAELA,KAFK,EAEKC,IAFL;AAAA;AAAA,mBAGMR,IAAI,CAACS,gBAAL,CAAsB;AAAEF,cAAAA,KAAK,EAALA;AAAF,aAAtB,EAAiCC,IAAjC,EAAuC;AAAEE,cAAAA,MAAM,EAAE;AAAV,aAAvC,CAHN;;AAAA;AAGPC,YAAAA,IAHO;AAIbN,YAAAA,GAAG,CAACO,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqBF,IAArB;AAJa;AAAA;;AAAA;AAAA;AAAA;AAMbN,YAAAA,GAAG,CAACO,MAAJ,CAAW,GAAX,EAAgBC,IAAhB;;AANa;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAjB;;AAAA;AAAA;AAAA;AAAA;AAUAC,MAAM,CAACC,OAAP,GAAiBd,MAAjB","sourcesContent":["const express = require(\"express\");\nconst { User } = require(\"../models\");\n\nconst router = express.Router();\n\nrouter.post(\"/\", async (req, res) => {\n  try {\n    const { email, ...rest } = req.body;\n    const user = await User.findOneAndUpdate({ email }, rest, { upsert: true });\n    res.status(201).send(user);\n  } catch (err) {\n    res.status(400).send(err);\n  }\n});\n\nmodule.exports = router;\n"]},"metadata":{},"sourceType":"script"}
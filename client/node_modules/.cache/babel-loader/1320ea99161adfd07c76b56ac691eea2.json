{"ast":null,"code":"'use strict';\n\nvar _regeneratorRuntime = require(\"/Users/mikebannoura/Dropbox/My Mac (MacBook-Pro-Mike.local)/Desktop/mmbball-app/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\");\n\nvar _createForOfIteratorHelper = require(\"/Users/mikebannoura/Dropbox/My Mac (MacBook-Pro-Mike.local)/Desktop/mmbball-app/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/createForOfIteratorHelper\");\n\nvar _asyncToGenerator = require(\"/Users/mikebannoura/Dropbox/My Mac (MacBook-Pro-Mike.local)/Desktop/mmbball-app/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/asyncToGenerator\");\n\nvar ops = require('../ops');\n\nvar PDFImage = require('./pdf');\n\nvar PDF = require('../object');\n\nmodule.exports = /*#__PURE__*/function () {\n  var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(img, doc, parent, opts) {\n    var aliases, _cursor, renderWidth, renderHeight, x, y, chunk, _iterator, _step, alias;\n\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            if (img) {\n              _context.next = 2;\n              break;\n            }\n\n            throw TypeError('No image provided');\n\n          case 2:\n            if (doc._currentContent) {\n              _context.next = 5;\n              break;\n            }\n\n            _context.next = 5;\n            return doc._startPage();\n\n          case 5:\n            aliases = doc._useXObject(img);\n            _cursor = parent._cursor;\n\n            if (opts.width && opts.height) {\n              renderWidth = opts.width;\n              renderHeight = opts.height;\n            } else if (opts.width) {\n              renderWidth = opts.width;\n              renderHeight = img.height * (opts.width / img.width);\n            } else if (opts.height) {\n              renderHeight = opts.height;\n              renderWidth = img.width * (opts.height / img.height);\n            } else {\n              renderWidth = Math.min(img.width, _cursor.width);\n              renderHeight = img.height * (renderWidth / img.width);\n\n              if (renderHeight > _cursor.height) {\n                renderHeight = _cursor.height;\n                renderWidth = img.width * (renderHeight / img.height);\n              }\n            }\n\n            x = _cursor.x;\n            y = _cursor.y;\n\n            if (opts.wrap === false) {\n              if (opts.x !== undefined && opts.x !== null) {\n                x = opts.x;\n              }\n\n              if (opts.y !== undefined && opts.y !== null) {\n                y = opts.y;\n              }\n            } else {\n              _cursor.y -= renderHeight;\n            }\n\n            y -= renderHeight;\n            _context.t0 = opts.align;\n            _context.next = _context.t0 === 'right' ? 15 : _context.t0 === 'center' ? 17 : _context.t0 === 'left' ? 19 : 19;\n            break;\n\n          case 15:\n            x += _cursor.width - renderWidth;\n            return _context.abrupt(\"break\", 20);\n\n          case 17:\n            x += (_cursor.width - renderWidth) / 2;\n            return _context.abrupt(\"break\", 20);\n\n          case 19:\n            return _context.abrupt(\"break\", 20);\n\n          case 20:\n            if (img instanceof PDFImage) {\n              // in percent\n              renderWidth /= img.width;\n              renderHeight /= img.height;\n            }\n\n            chunk = ops.q() + ops.cm(renderWidth, 0, 0, renderHeight, x, y);\n            _iterator = _createForOfIteratorHelper(aliases);\n\n            try {\n              for (_iterator.s(); !(_step = _iterator.n()).done;) {\n                alias = _step.value;\n                chunk += ops.Do(alias);\n              }\n            } catch (err) {\n              _iterator.e(err);\n            } finally {\n              _iterator.f();\n            }\n\n            chunk += ops.Q();\n\n            if (opts.link) {\n              doc._annotations.push(new PDF.Dictionary({\n                Type: 'Annot',\n                Subtype: 'Link',\n                Rect: new PDF.Array([x, y, x + renderWidth, y + renderHeight]),\n                Border: new PDF.Array([0, 0, 0]),\n                A: new PDF.Dictionary({\n                  Type: 'Action',\n                  S: 'URI',\n                  URI: new PDF.String(opts.link)\n                })\n              }));\n            }\n\n            if (opts.goTo) {\n              doc._annotations.push(new PDF.Dictionary({\n                Type: 'Annot',\n                Subtype: 'Link',\n                Rect: new PDF.Array([x, y, x + renderWidth, y + renderHeight]),\n                Border: new PDF.Array([0, 0, 0]),\n                A: new PDF.Dictionary({\n                  S: 'GoTo',\n                  D: new PDF.String(opts.goTo)\n                })\n              }));\n            }\n\n            if (opts.destination) {\n              doc._destinations.set(opts.destination, new PDF.Array([doc._currentPage.toReference(), new PDF.Name('XYZ'), _cursor.x, _cursor.y + renderHeight, null]));\n            }\n\n            _context.next = 30;\n            return doc._write(chunk);\n\n          case 30:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n\n  return function (_x, _x2, _x3, _x4) {\n    return _ref.apply(this, arguments);\n  };\n}();","map":{"version":3,"sources":["/Users/mikebannoura/Dropbox/My Mac (MacBook-Pro-Mike.local)/Desktop/mmbball-app/client/node_modules/pdfjs/lib/image/render.js"],"names":["ops","require","PDFImage","PDF","module","exports","img","doc","parent","opts","TypeError","_currentContent","_startPage","aliases","_useXObject","_cursor","width","height","renderWidth","renderHeight","Math","min","x","y","wrap","undefined","align","chunk","q","cm","alias","Do","Q","link","_annotations","push","Dictionary","Type","Subtype","Rect","Array","Border","A","S","URI","String","goTo","D","destination","_destinations","set","_currentPage","toReference","Name","_write"],"mappings":"AAAA;;;;;;;;AAEA,IAAMA,GAAG,GAAGC,OAAO,CAAC,QAAD,CAAnB;;AACA,IAAMC,QAAQ,GAAGD,OAAO,CAAC,OAAD,CAAxB;;AACA,IAAME,GAAG,GAAGF,OAAO,CAAC,WAAD,CAAnB;;AAEAG,MAAM,CAACC,OAAP;AAAA,sEAAiB,iBAAeC,GAAf,EAAoBC,GAApB,EAAyBC,MAAzB,EAAiCC,IAAjC;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA,gBACVH,GADU;AAAA;AAAA;AAAA;;AAAA,kBAEPI,SAAS,CAAC,mBAAD,CAFF;;AAAA;AAAA,gBAKVH,GAAG,CAACI,eALM;AAAA;AAAA;AAAA;;AAAA;AAAA,mBAMPJ,GAAG,CAACK,UAAJ,EANO;;AAAA;AASTC,YAAAA,OATS,GASCN,GAAG,CAACO,WAAJ,CAAgBR,GAAhB,CATD;AAWTS,YAAAA,OAXS,GAWCP,MAAM,CAACO,OAXR;;AAcf,gBAAIN,IAAI,CAACO,KAAL,IAAcP,IAAI,CAACQ,MAAvB,EAA+B;AAC7BC,cAAAA,WAAW,GAAIT,IAAI,CAACO,KAApB;AACAG,cAAAA,YAAY,GAAGV,IAAI,CAACQ,MAApB;AACD,aAHD,MAGO,IAAGR,IAAI,CAACO,KAAR,EAAe;AACpBE,cAAAA,WAAW,GAAIT,IAAI,CAACO,KAApB;AACAG,cAAAA,YAAY,GAAGb,GAAG,CAACW,MAAJ,IAAcR,IAAI,CAACO,KAAL,GAAaV,GAAG,CAACU,KAA/B,CAAf;AACD,aAHM,MAGA,IAAIP,IAAI,CAACQ,MAAT,EAAiB;AACtBE,cAAAA,YAAY,GAAGV,IAAI,CAACQ,MAApB;AACAC,cAAAA,WAAW,GAAIZ,GAAG,CAACU,KAAJ,IAAaP,IAAI,CAACQ,MAAL,GAAcX,GAAG,CAACW,MAA/B,CAAf;AACD,aAHM,MAGA;AACLC,cAAAA,WAAW,GAAIE,IAAI,CAACC,GAAL,CAASf,GAAG,CAACU,KAAb,EAAoBD,OAAO,CAACC,KAA5B,CAAf;AACAG,cAAAA,YAAY,GAAGb,GAAG,CAACW,MAAJ,IAAcC,WAAW,GAAGZ,GAAG,CAACU,KAAhC,CAAf;;AAEA,kBAAIG,YAAY,GAAGJ,OAAO,CAACE,MAA3B,EAAmC;AACjCE,gBAAAA,YAAY,GAAGJ,OAAO,CAACE,MAAvB;AACAC,gBAAAA,WAAW,GAAIZ,GAAG,CAACU,KAAJ,IAAaG,YAAY,GAAGb,GAAG,CAACW,MAAhC,CAAf;AACD;AACF;;AAEGK,YAAAA,CAjCW,GAiCPP,OAAO,CAACO,CAjCD;AAkCXC,YAAAA,CAlCW,GAkCPR,OAAO,CAACQ,CAlCD;;AAoCf,gBAAId,IAAI,CAACe,IAAL,KAAc,KAAlB,EAAyB;AACvB,kBAAIf,IAAI,CAACa,CAAL,KAAWG,SAAX,IAAwBhB,IAAI,CAACa,CAAL,KAAW,IAAvC,EAA6C;AAC3CA,gBAAAA,CAAC,GAAGb,IAAI,CAACa,CAAT;AACD;;AAED,kBAAIb,IAAI,CAACc,CAAL,KAAWE,SAAX,IAAwBhB,IAAI,CAACc,CAAL,KAAW,IAAvC,EAA6C;AAC3CA,gBAAAA,CAAC,GAAGd,IAAI,CAACc,CAAT;AACD;AACF,aARD,MAQO;AACLR,cAAAA,OAAO,CAACQ,CAAR,IAAaJ,YAAb;AACD;;AAEDI,YAAAA,CAAC,IAAIJ,YAAL;AAhDe,0BAkDPV,IAAI,CAACiB,KAlDE;AAAA,4CAmDR,OAnDQ,wBAsDR,QAtDQ,wBAyDR,MAzDQ;AAAA;;AAAA;AAoDXJ,YAAAA,CAAC,IAAIP,OAAO,CAACC,KAAR,GAAgBE,WAArB;AApDW;;AAAA;AAuDXI,YAAAA,CAAC,IAAI,CAACP,OAAO,CAACC,KAAR,GAAgBE,WAAjB,IAAgC,CAArC;AAvDW;;AAAA;AAAA;;AAAA;AA8Df,gBAAIZ,GAAG,YAAYJ,QAAnB,EAA6B;AAC3B;AACAgB,cAAAA,WAAW,IAAIZ,GAAG,CAACU,KAAnB;AACAG,cAAAA,YAAY,IAAIb,GAAG,CAACW,MAApB;AACD;;AAEGU,YAAAA,KApEW,GAoEH3B,GAAG,CAAC4B,CAAJ,KACA5B,GAAG,CAAC6B,EAAJ,CAAOX,WAAP,EAAoB,CAApB,EAAuB,CAAvB,EAA0BC,YAA1B,EAAwCG,CAAxC,EAA2CC,CAA3C,CArEG;AAAA,mDAuEKV,OAvEL;;AAAA;AAuEf,kEAA6B;AAAlBiB,gBAAAA,KAAkB;AAC3BH,gBAAAA,KAAK,IAAI3B,GAAG,CAAC+B,EAAJ,CAAOD,KAAP,CAAT;AACD;AAzEc;AAAA;AAAA;AAAA;AAAA;;AA2EfH,YAAAA,KAAK,IAAK3B,GAAG,CAACgC,CAAJ,EAAV;;AAEA,gBAAIvB,IAAI,CAACwB,IAAT,EAAe;AACb1B,cAAAA,GAAG,CAAC2B,YAAJ,CAAiBC,IAAjB,CAAsB,IAAIhC,GAAG,CAACiC,UAAR,CAAmB;AACvCC,gBAAAA,IAAI,EAAE,OADiC;AAEvCC,gBAAAA,OAAO,EAAE,MAF8B;AAGvCC,gBAAAA,IAAI,EAAE,IAAIpC,GAAG,CAACqC,KAAR,CAAc,CAAClB,CAAD,EAAIC,CAAJ,EAAOD,CAAC,GAAGJ,WAAX,EAAwBK,CAAC,GAAGJ,YAA5B,CAAd,CAHiC;AAIvCsB,gBAAAA,MAAM,EAAE,IAAItC,GAAG,CAACqC,KAAR,CAAc,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,CAAd,CAJ+B;AAKvCE,gBAAAA,CAAC,EAAE,IAAIvC,GAAG,CAACiC,UAAR,CAAmB;AACpBC,kBAAAA,IAAI,EAAE,QADc;AAEpBM,kBAAAA,CAAC,EAAE,KAFiB;AAGpBC,kBAAAA,GAAG,EAAE,IAAIzC,GAAG,CAAC0C,MAAR,CAAepC,IAAI,CAACwB,IAApB;AAHe,iBAAnB;AALoC,eAAnB,CAAtB;AAWD;;AACD,gBAAIxB,IAAI,CAACqC,IAAT,EAAe;AACbvC,cAAAA,GAAG,CAAC2B,YAAJ,CAAiBC,IAAjB,CAAsB,IAAIhC,GAAG,CAACiC,UAAR,CAAmB;AACvCC,gBAAAA,IAAI,EAAE,OADiC;AAEvCC,gBAAAA,OAAO,EAAE,MAF8B;AAGvCC,gBAAAA,IAAI,EAAE,IAAIpC,GAAG,CAACqC,KAAR,CAAc,CAAClB,CAAD,EAAIC,CAAJ,EAAOD,CAAC,GAAGJ,WAAX,EAAwBK,CAAC,GAAGJ,YAA5B,CAAd,CAHiC;AAIvCsB,gBAAAA,MAAM,EAAE,IAAItC,GAAG,CAACqC,KAAR,CAAc,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,CAAd,CAJ+B;AAKvCE,gBAAAA,CAAC,EAAE,IAAIvC,GAAG,CAACiC,UAAR,CAAmB;AACpBO,kBAAAA,CAAC,EAAE,MADiB;AAEpBI,kBAAAA,CAAC,EAAE,IAAI5C,GAAG,CAAC0C,MAAR,CAAepC,IAAI,CAACqC,IAApB;AAFiB,iBAAnB;AALoC,eAAnB,CAAtB;AAUD;;AACD,gBAAIrC,IAAI,CAACuC,WAAT,EAAsB;AACpBzC,cAAAA,GAAG,CAAC0C,aAAJ,CAAkBC,GAAlB,CAAsBzC,IAAI,CAACuC,WAA3B,EAAwC,IAAI7C,GAAG,CAACqC,KAAR,CAAc,CACpDjC,GAAG,CAAC4C,YAAJ,CAAiBC,WAAjB,EADoD,EAEpD,IAAIjD,GAAG,CAACkD,IAAR,CAAa,KAAb,CAFoD,EAGpDtC,OAAO,CAACO,CAH4C,EAIpDP,OAAO,CAACQ,CAAR,GAAYJ,YAJwC,EAKpD,IALoD,CAAd,CAAxC;AAOD;;AA9Gc;AAAA,mBAgHTZ,GAAG,CAAC+C,MAAJ,CAAW3B,KAAX,CAhHS;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAjB;;AAAA;AAAA;AAAA;AAAA","sourcesContent":["'use strict'\n\nconst ops = require('../ops')\nconst PDFImage = require('./pdf')\nconst PDF = require('../object')\n\nmodule.exports = async function(img, doc, parent, opts) {\n  if (!img) {\n    throw TypeError('No image provided')\n  }\n\n  if (!doc._currentContent) {\n    await doc._startPage()\n  }\n\n  const aliases = doc._useXObject(img)\n\n  const _cursor = parent._cursor\n\n  let renderWidth, renderHeight\n  if (opts.width && opts.height) {\n    renderWidth  = opts.width\n    renderHeight = opts.height\n  } else if(opts.width) {\n    renderWidth  = opts.width\n    renderHeight = img.height * (opts.width / img.width)\n  } else if (opts.height) {\n    renderHeight = opts.height\n    renderWidth  = img.width * (opts.height / img.height)\n  } else {\n    renderWidth  = Math.min(img.width, _cursor.width)\n    renderHeight = img.height * (renderWidth / img.width)\n\n    if (renderHeight > _cursor.height) {\n      renderHeight = _cursor.height\n      renderWidth  = img.width * (renderHeight / img.height)\n    }\n  }\n\n  let x = _cursor.x\n  let y = _cursor.y\n\n  if (opts.wrap === false) {\n    if (opts.x !== undefined && opts.x !== null) {\n      x = opts.x\n    }\n\n    if (opts.y !== undefined && opts.y !== null) {\n      y = opts.y\n    }\n  } else {\n    _cursor.y -= renderHeight\n  }\n\n  y -= renderHeight\n\n  switch (opts.align) {\n    case 'right':\n      x += _cursor.width - renderWidth\n      break\n    case 'center':\n      x += (_cursor.width - renderWidth) / 2\n      break\n    case 'left':\n    default:\n      break\n  }\n\n  if (img instanceof PDFImage) {\n    // in percent\n    renderWidth /= img.width\n    renderHeight /= img.height\n  }\n\n  let chunk = ops.q()\n            + ops.cm(renderWidth, 0, 0, renderHeight, x, y)\n\n  for (const alias of aliases) {\n    chunk += ops.Do(alias)\n  }\n\n  chunk +=  ops.Q()\n\n  if (opts.link) {\n    doc._annotations.push(new PDF.Dictionary({\n      Type: 'Annot',\n      Subtype: 'Link',\n      Rect: new PDF.Array([x, y, x + renderWidth, y + renderHeight]),\n      Border: new PDF.Array([0, 0, 0]),\n      A: new PDF.Dictionary({\n        Type: 'Action',\n        S: 'URI',\n        URI: new PDF.String(opts.link),\n      }),\n    }))\n  }\n  if (opts.goTo) {\n    doc._annotations.push(new PDF.Dictionary({\n      Type: 'Annot',\n      Subtype: 'Link',\n      Rect: new PDF.Array([x, y, x + renderWidth, y + renderHeight]),\n      Border: new PDF.Array([0, 0, 0]),\n      A: new PDF.Dictionary({\n        S: 'GoTo',\n        D: new PDF.String(opts.goTo),\n      }),\n    }))\n  }\n  if (opts.destination) {\n    doc._destinations.set(opts.destination, new PDF.Array([\n      doc._currentPage.toReference(),\n      new PDF.Name('XYZ'),\n      _cursor.x,\n      _cursor.y + renderHeight,\n      null,\n    ]))\n  }\n\n  await doc._write(chunk)\n}\n"]},"metadata":{},"sourceType":"script"}